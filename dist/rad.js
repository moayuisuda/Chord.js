!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rad=e():t.rad=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);let r={0:["C"],1:["C#","Db"],2:["D"],3:["D#","Bb"],4:["E"],5:["F"],6:["F#","Gb"],7:["G"],8:["G#","Ab"],9:["A"],10:["A#","Bb"],11:["B"]},o={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},u={2:2,3:4,4:5,5:7,6:9,7:11,8:12,9:14,10:16,11:17,12:19,13:21,14:23,15:24},f=new Map([["m7",[3,7,10]],["m9",[3,7,10,14]],["m11",[3,7,10,14,17]],["M7",[4,7,11]],["M9",[4,7,11,14]],["M11",[4,7,10,14,17]],["aug",[4,8]],["dim",[3,6]],["sus2",[2,7]],["sus4",[5,7]],["7",[3,7,11]],["9",[3,7,11,14]],["11",[3,7,11,14,17]],["m",[3,7]],["",[4,7]]]),i={major:[2,2,1,2,2,2,1],minor:[2,1,2,2,1,2,2]};function c(t){let e=t.match(/[A-G](#|b)?/);if(e)return e[0];throw`[Rad] Can't resolve the root note for "${t}"`}function l(t){let e=null;for(let[n]of f){let r=new RegExp(`^[A-G](#|b)?(${n}\\d{0,2})`);if(e=t.match(r))return e[2]}throw`[Rad] Can't find a chord type matched "${t}"`}function a(t){let e,n=[],r=/add(\d{1,2})/g;for(;e=r.exec(t);)n.push(e[1]);return n}function d(t){let e,n=[],r=/omit(\d{1,2})/g;for(;e=r.exec(t);)n.push(e[1]);return n}function p(t){let e=t.match(/\/([A-G](#|b)?)/);if(e)return e[1]}function s(t){return"#"==t?0:1}function b(t,e,n){if(n){let r=t[0],o=noteToInterval(t[1]),u=noteToInterval(e);if(o=u)return;o>u?t.splice(0,1,e+n):t.splice(0,1,e+(n-1)),t.push(c(r)+(Number(r.match(/\d/)[0])+1))}else t.unshift(e)}function h(t){if(!(t instanceof Object))return t;let e="[object Object]"===Object.prototype.toString.call(t)?{}:[];for(let n in t)e[n]=t instanceof Object?h(t[n]):t[n];return e}function m(t,e){let n,r=[t];for(let o of e)n=t+o,r.push(n);return r}function y(t,e,n){let r,o,u,f=[],i=s(n);for(let n of t){for(r=e;n>=12;)n-=12,r++;u=(o=O(n))[i]?o[i]:o[0],f.push(u+r)}return f}function j(t,e){let n,r,o=[],u=s(e);for(let e of t){for(;e>=12;)e-=12;r=(n=O(e))[u]?n[u]:n[0],o.push(r)}return o}function g(t){let e=[];for(let n=0;n<t.length;n++)n?e.push(e[n-1]+t[n]):e.push(t[n]);return e}function v(t){let e=o[t];if("[object Undefined]"!==Object.prototype.toString.call(e))return e;throw`[Rad] Can't convert "${t}" into interval `}function O(t){return r[t]}function x({root:t,type:e,add:n,omit:r,on:o},i,c="#"){let l=[],a=function(t){return h(f.get(t))}(e),d=v(t);n.map(t=>{a.push(function(t){let e=u[t];if(e)return e;throw`[Rad] Can't find a interval matched "${t}", the max degree is 15`}(t))}),a.sort((t,e)=>t-e);for(let t=0;t<r.length;t++)for(let e=0;e<a.length;e++)r[t],a[e],a.splice(t,1);let p=m(d,a);return l=i?y(p,i,c):j(p,c),o&&b(l,o,i),l}function w({root:t,type:e},n,r="#"){let o=[],u=[],f=m(v(t),g(function(t){let e=i[t];if(e)return h(e);throw`[Rad] Can't find a scale matched "${t}"`}(e)));u=u.concat(f);for(let t=1;t<5;t++)u.push(f[t]+12);let c=n?y(u,n,r):j(u,n);for(let t=0;t<f.length;t++)o.push([c[t],c[t+2],c[t+4]]);return o}function C(t,e,n){return"[object Object]"===Object.prototype.toString.call(t)?x(t,e,n):x({root:c(r=t),type:l(r),add:a(r),omit:d(r),on:p(r)},e,n);var r}function A(t,e,n){return function({root:t,type:e},n,r="#"){let o=m(v(t),g(typeToScale[e]));return n?y(o,n,r):j(o,r)}(t,e,n)}function G(t,e,n){return w(t,e,n)}n.d(e,"chord",(function(){return C})),n.d(e,"scale",(function(){return A})),n.d(e,"scaleChords",(function(){return G}))}])}));
//# sourceMappingURL=rad.js.map