!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.chord=e():t.chord=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);let r={0:["C"],1:["C#","Db"],2:["D"],3:["D#","Eb"],4:["E"],5:["F"],6:["F#","Gb"],7:["G"],8:["G#","Ab"],9:["A"],10:["A#","Bb"],11:["B"]},o={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},u={"#1":1,b2:1,"#2":3,b3:3,"#3":5,b4:4,"#4":6,b5:6,"#5":8,b6:8,"#6":10,b7:10,"#7":12,b8:11,"#8":13,2:2,3:4,4:5,5:7,6:9,7:11,8:12},i=new Map([["m7",[3,7,10]],["m9",[3,7,10,14]],["m11",[3,7,10,14,17]],["M7",[4,7,11]],["M9",[4,7,11,14]],["M11",[4,7,11,14,17]],["aug",[4,8]],["dim",[3,6]],["sus2",[2,7]],["sus4",[5,7]],["7",[4,7,10]],["9",[4,7,10,14]],["11",[3,7,11,14,17]],["m",[3,7]],["",[4,7]]]),f={ionian:[2,2,1,2,2,2,1],major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],phrygian:[1,2,2,2,1,2,2],lydian:[2,2,2,1,2,2,1],mixolydian:[2,2,1,2,2,1,2],aeolian:[2,1,2,2,1,2,2],minor:[2,1,2,2,1,2,2],locrian:[1,2,2,1,2,2,2]};function c(t,e){let n,r=[t];for(let o of e)n=t+o,r.push(n);return r}function l(t,e,n){let r,o,u,i=[],f=C(n);for(let n of t){for(r=e;n>=12;)n-=12,r++;u=(o=h(n))[f]?o[f]:o[0],i.push(u+r)}return i}function a(t,e){let n,r,o=[],u=C(e);for(let e of t){for(;e>=12;)e-=12;r=(n=h(e))[u]?n[u]:n[0],o.push(r)}return o}function d(t){let e=[];for(let n=0;n<t.length;n++)n?e.push(e[n-1]+t[n]):e.push(t[n]);return e}function b([t,e,n],r){let o,u=C(r);o=[e-t,n-t].join("-");let f=function(t){let e={};for(let[n,r]of t.entries())e[r.join("-")]=n;return e}(i)[o];for(;t>=12;)t-=12;return h(t)[u]+f}function p(t){let e=o[t];if("[object Undefined]"!==Object.prototype.toString.call(e))return e;throw`[Chord] Can't convert "${t}" into interval `}function s(t){let e=f[t];if(e)return w(e);throw`[Chord] Can't find a scale matched "${t}"`}function h(t){return r[t]}function m(t){let e=Number(t.match(/\d{1,2}/)[0]),n=t.match(/(b|#)/)&&t.match(/(b|#)/)[0],r=0;for(;e>=9;)e-=7,r++;return console.log(n,e,u[n?n+e:e]),u[n?n+e:e]+12*r}function y(t){let e=t.match(/[A-G](#|b)?/);if(e)return e[0];throw`[Chord] Can't resolve the root note for "${t}"`}function j(t){let e=null;for(let[n]of i){let r=new RegExp(`^[A-G](#|b)?(${n}\\d{0,2})`);if(e=t.match(r))return e[2]}throw`[Chord] Can't find a chord type matched "${t}"`}function g(t){let e,n=[],r=/add((#|b)?\d{1,2})/g;for(;e=r.exec(t);)n.push(e[1]);return n}function O(t){let e,n=[],r=/omit((#|b)?\d{1,2})/g;for(;e=r.exec(t);)n.push(e[1]);return n}function x(t){let e=t.match(/\/([A-G](#|b)?)/);if(e)return e[1]}function C(t){return"#"==t?0:1}function v(t,e,n){if(n){let r=t[0],o=p(y(t[1])),u=p(e);if(o===u)return;o>u?t.splice(0,1,e+n):t.splice(0,1,e+(n-1)),t.push(y(r)+(Number(r.match(/\d/)[0])+1))}else t.unshift(e)}function w(t){if(!(t instanceof Object))return t;let e="[object Object]"===Object.prototype.toString.call(t)?{}:[];for(let n in t)e[n]=t instanceof Object?w(t[n]):t[n];return e}function A({root:t,type:e,add:n,omit:r,on:o},u,f="#"){let d=[],b=function(t){return w(i.get(t))}(e),s=p(t);n.map(t=>{b.push(m(t))}),b.sort((t,e)=>t-e);for(let t=0;t<r.length;t++)for(let e=0;e<b.length;e++)m(r[t])==b[e]&&b.splice(e,1);let h=c(s,b);return d=u?l(h,u,f):a(h,f),o&&v(d,o,u),d}function G(t,e,n){var r;return"[object Object]"===Object.prototype.toString.call(t)?A(t,e,n):A({root:y(r=t),type:j(r),add:g(r),omit:O(r),on:x(r)},e,n)}function M(t,e,n){return function({root:t,type:e},n=4,r="#"){let o=c(p(t),d(s(e)));return n?l(o,n,r):a(o,r)}(t,e,n)}function S(t){return function({root:t,type:e},n="#"){let r=[],o=[],u=c(p(t),d(s(e)));o=o.concat(u);for(let t=1;t<5;t++)o.push(u[t]+12);for(let t=0;t<u.length-1;t++)r.push(b([o[t],o[t+2],o[t+4]],n));return r}(t)}n.d(e,"chord",(function(){return G})),n.d(e,"scale",(function(){return M})),n.d(e,"scaleChords",(function(){return S}))}])}));
//# sourceMappingURL=chord.js.map